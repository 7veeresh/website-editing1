<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Studio</title>
    <meta http-equiv="refresh" content="0; url=./capra.html" />
    
    <!-- CSS references with fallbacks -->
    <link rel="stylesheet" href="./css2(2)">
    <link rel="stylesheet" href="./css2(3)">
    <link rel="stylesheet" href="./fixes.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="./192px.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    
    <style>
        /* Basic fallback styles */
        body {
            font-family: 'Google Sans Code', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #1f1f1f;
            color: #e1dfdf;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .logo {
            width: 64px;
            height: 64px;
            margin-bottom: 20px;
        }
        
        .status {
            background-color: #292929;
            border: 1px solid #494949;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .error {
            background-color: #2e2e2e;
            border: 1px solid #f76769;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            color: #f76769;
        }
        
        .warning {
            background-color: #2e2e2e;
            border: 1px solid #ffa23e;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            color: #ffa23e;
        }
        
        .info {
            background-color: #2e2e2e;
            border: 1px solid #98b1ff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            color: #98b1ff;
        }
        
        .success {
            background-color: #2e2e2e;
            border: 1px solid #66ce98;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            color: #66ce98;
        }
        
        .button {
            background-color: #7895ff;
            color: #000000;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            margin: 5px;
        }
        
        .button:hover {
            background-color: #88a3ff;
        }
        
        .button:disabled {
            background-color: #535353;
            color: #828282;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <noscript>
        <meta http-equiv="refresh" content="0; url=./capra.html" />
    </noscript>
    <script>location.replace('./capra.html' + (location.search||'') + (location.hash||''));</script>
    <div class="container">
        <div class="header">
            <img src="./192px.svg" alt="Firebase Studio Logo" class="logo">
            <h1>Firebase Studio</h1>
            <p>Development Environment Status</p>
        </div>
        
        <div class="status">
            <h2>System Status</h2>
            <div id="status-content">
                <div class="success">
                    <strong>Success:</strong> Fallback CSS and JavaScript files have been applied
                </div>
                <div class="info">
                    <strong>Info:</strong> Some original files contain redirect HTML and have been replaced with working alternatives
                </div>
                <div class="warning">
                    <strong>Note:</strong> This is a debug version with mocked functionality
                </div>
            </div>
        </div>
        
        <div class="status">
            <h2>Available Pages</h2>
            <button class="button" onclick="window.open('./capra.html', '_blank')">Open Capra (Main App)</button>
            <button class="button" onclick="window.open('./msg.html', '_blank')">Open Message Page</button>
            <button class="button" onclick="window.open('./proxy.html', '_blank')">Open Proxy Page</button>
        </div>
        
        <div class="status">
            <h2>Debug Information</h2>
            <div id="debug-info">
                <p><strong>Files Found:</strong> <span id="file-count">Loading...</span></p>
                <p><strong>CSS Files:</strong> <span id="css-files">Loading...</span></p>
                <p><strong>JS Files:</strong> <span id="js-files">Loading...</span></p>
                <p><strong>Images:</strong> <span id="image-files">Loading...</span></p>
            </div>
        </div>
    </div>

    <!-- Scripts with fallbacks -->
    <script src="./fixes.js"></script>
    <script src="./debug.js"></script>
    
    <script>
        // Enhanced debug information
        document.addEventListener('DOMContentLoaded', function() {
            // Count files by type
            const files = [
                'capra.html', 'msg.html', 'proxy.html', 'RotateCookiesPage.html', 
                'third_party_cookies_check.html', 'saved_resource.html',
                'css2(2)', 'css2(3)', 'css2(1)', 'css2', 'index-KzK_8K8B.css',
                'index-BMgX3D-v.js.download', 'googleapis.proxy.js.download', 'js',
                'lazy.min.js.download', 'cb=gapi.loaded_0', 'cb=gapi.loaded_1', 'cb=gapi(1).loaded_0',
                '192px.svg', 'typescript.svg', 'firebase.svg', 'next.svg', 'nodejs.svg', 
                'react_ts.svg', 'css.svg', 'image.svg', 'file.svg',
                'unnamed.jpg', 'unnamed(1).jpg', 'icon-192.png'
            ];
            
            const cssFiles = files.filter(f => f.includes('css') || f.includes('CSS'));
            const jsFiles = files.filter(f => f.includes('js') || f.includes('JS') || f.includes('download'));
            const imageFiles = files.filter(f => f.includes('svg') || f.includes('jpg') || f.includes('png'));
            
            document.getElementById('file-count').textContent = files.length;
            document.getElementById('css-files').textContent = cssFiles.join(', ');
            document.getElementById('js-files').textContent = jsFiles.join(', ');
            document.getElementById('image-files').textContent = imageFiles.join(', ');
            
            // Update status based on debug results
            setTimeout(() => {
                if (window.debugResults) {
                    const { report, fixes } = window.debugResults;
                    
                    // Update status content
                    const statusContent = document.getElementById('status-content');
                    statusContent.innerHTML = '';
                    
                    if (fixes.length > 0) {
                        fixes.forEach(fix => {
                            const errorDiv = document.createElement('div');
                            errorDiv.className = 'error';
                            errorDiv.innerHTML = `<strong>Error:</strong> ${fix.resource} - ${fix.problem}`;
                            statusContent.appendChild(errorDiv);
                        });
                    }
                    
                    if (report.summary.css.issues === 0 && report.summary.js.issues === 0) {
                        const successDiv = document.createElement('div');
                        successDiv.className = 'success';
                        successDiv.innerHTML = '<strong>Success:</strong> All resources are working correctly';
                        statusContent.appendChild(successDiv);
                    }
                }
            }, 2000);
        });
    </script>
</body>
</html>
